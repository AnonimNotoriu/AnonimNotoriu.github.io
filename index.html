<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>ausbitbank.github.io</title>
  <script src="loader.js"></script>
  <script type="text/javascript">
  loadScript("remarkable.min.js", function(){
    // markdown parsing
  });
  loadScript("https://cdn.steemjs.com/lib/latest/steem.min.js", function(){
    var steemusername = 'ausbitbank';
    var redirect = sessionStorage.redirect;
    delete sessionStorage.redirect;
    var md = new Remarkable();
    if (redirect && redirect != location.href) {
      history.replaceState(null, null, redirect);
      //console.log("redirect from "+redirect);
      link = redirect.split('/')
      permlink = link[3]
      console.log("loading "+permlink);
      steem.api.getContent(steemusername, permlink, function(err, result) {
        console.log(err, result);
        document.getElementById("title").innerHTML='<h1>'+result['title']+'</h1>';
        document.getElementById("content").innerHTML=md.render(result['body']);
      });
    } else {
      //console.log("no redirect - load index");
      steem.api.getState('/@'+steemusername, function(err, result) {
        console.log(err, result);

      });
    }
  });
  </script>
  <style>
    #title {}
    #content {}
  </style>
</head>
<body>
  <div id="title">

  </div>
  <div id="content">

  </div>
</body>
</html>
